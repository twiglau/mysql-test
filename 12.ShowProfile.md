# ShowProfile

- 是 mysql 提供可以用来分析当前会话中语句执行的资源消耗情况，可以用于 SQL 调优的测量
- 官网：https://dev.mysql.com/doc/refman/8.0/en/show-profile.html

## 使用方法

- 默认情况下，参数处于关闭状态，并保存最近 15 次的运行结果

```sql
SHOW VARIABLES LIKE 'profiling%';
```

- 运行 SQL

```sql
SEELCT * FROM emp group by id%10 limit 150000;
SELECT * FROM dept group by id%20 ORDER BY 5;

-- 查看结果
SHOW PROFILES;

-- 查看详细结果
SHOW PROFILE CPU, BLOCK, IO FOR QUERY 1;
```

## 结论

1. coverting HEAP to MyISAM 查询结果太大，内存都不够用了往磁盘上搬了。
2. Creating tmp table 创建临时表： 拷贝数据到临时表，用完再删除。
3. Copying to tmp table on disk 把内存中临时表复制到磁盘，危险！！
4. locked
